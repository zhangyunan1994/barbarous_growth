<h1>第10 章 Python 字符串 </h1>

> 学的到东西的事情是锻炼，学不到的是磨练

**Table of Contents**
<!-- TOC -->

- [字符串更新](#字符串更新)
- [转义字符](#转义字符)
- [原始字符串](#原始字符串)
- [运算](#运算)
    - [连接](#连接)
    - [重复输出字符串](#重复输出字符串)
    - [通过索引获取字符串中字符](#通过索引获取字符串中字符)
- [切片](#切片)
- [in 成员运算符](#in-成员运算符)

<!-- /TOC -->

在我们的日常生活中，随处可见各种各样的文本，例如：
* 姓名
* 地址
* 文章
...

同时也需要处理这些文本，例如
* 找到名字中包含的姓
* 查看地址信息中的省、市、县
* 比较文本是否相等
* 判断一篇学生作文是否满800字
...

在前面已经讲了`python`的`基本类型`,字符串是 Python 中最常用的数据类型。我们可以使用引号('或")来创建字符串。
创建字符串很简单，只要为变量分配一个值即可。例如：

```python
In [1]: var1 = 'hello world'

In [2]: my_name = '张瑀楠'

In [3]: my_name
Out[3]: '张瑀楠'
```
这样我就保存了我的名字，下面写下我的籍贯

```python
In [4]: address = '河北省廊坊市永清县'

In [5]: address
Out[5]: '河北省廊坊市永清县'
```

最近在看一本书，好了把书名也保存一下
```python
In [10]: my_book = 'a brief history of tomorrow'

In [11]: my_book
Out[11]: 'a brief history of tomorrow'

```

说下书的介绍吧，勾引大家都看看
```python
In [13]: my_book_description = '''
    ...: 进入21世纪后，曾经长期威胁人类生存、发展的瘟疫、饥荒和战争已经被攻克，智人面临着
    ...: 新的待办议题：永生不老、幸福快乐和成为具有“神性”的人类。在解决这些新问题的过程中
    ...: ，科学技术的发展将颠覆我们很多当下认为无需佐证的“常识”，比如人文主义所推崇的自由
    ...: 意志将面临严峻挑战，机器将会代替人类做出更明智的选择。
    ...:
    ...: 更重要的，当以大数据、人工智能为代表的科学技术发展的日益成熟，人类将面临着从进化
    ...: 到智人以来zui大的一次改变，绝大部分人将沦为“无价值的群体”，只有少部分人能进化成特
    ...: 质发生改变的 “神人”。
    ...:
    ...: 未来，人类将面临着三大问题：生物本身就是算法，生命是不断处理数据的过程；意识与智
    ...: 能的分离；拥有大数据积累的外部环境将比我们自己更了解自己。如何看待这三大问题，以
    ...: 及如何采取应对措施，将直接影响着人类未来的发展。
    ...: '''

```

通过上面可以看到，基本上看到的文本都可以用字符串类型

# 字符串更新

写下我的`github`主页
```python
In [14]: my_github = 'https://gitee.com/zyndev'

In [15]: my_github
Out[15]: 'https://gitee.com/zyndev'
```
好像写错了，这个码云的地址(码云很好用，国内网速很快，也可以创建私有仓库，优质项目也很多)，这时我就需要修改一下了

```python
In [16]: my_github = 'https://github.com/zyndev'

In [17]: my_github
Out[17]: 'https://github.com/zyndev'
```
两个都是 `zyndev` 只要对变量 `my_github` 重新复制就可以了


# 转义字符
在需要在字符中使用特殊字符时，python用反斜杠(\ )转义字符。如下表：

| 转义字符  |描述     |
|:---      |:---     |
|\ (在行尾时)|续行符    |
|\\         |反斜杠符号 |
|\'         |单引号    |
|\"         |双引号    |
|\a         |响铃     |
|\b         |退格(Backspace)|
|\e         |转义     |
|\000       |空      |
|\n         |换行     |
|\v         |纵向制表符|
|\t         |横向制表符|
|\r         |回车     |
|\f         |换页     |
|\oyy       |八进制数，yy代表的字符，例如：\o12代表换行|
|\xyy       |十六进制数，yy代表的字符，例如：\x0a代表换行|
|\other     |其它的字符以普通格式输出|

为什么要有转义字符呢？

想想我们是如何声明一个字符串变量呢？

1. var1 = 'value1'
1. var2 = "value2"
1. var3 = '''value3'''
1. var4 = """value4"""

这四种方式，当我们要表示的文本是 `I'm zyndev!` 注意 `I` 后面是打印号，如果用第一种方式，
```python
In [19]: var1 = 'I'm zyndev!'
  File "<ipython-input-19-2ad76409522d>", line 1
    var1 = 'I'm zyndev!'
              ^
SyntaxError: invalid syntax
```
可以看出`python`无法匹配单引号，这时认为文本从 `m` 开始中断了

这时我们我可以使用第2种方式
```python
In [20]: var1 = "I'm zyndev!"

In [21]: var1
Out[21]: "I'm zyndev!"
```

类比我们也可以换用 3 或 4 的方式
但是总有一些字符串是没有这样处理的

> I'm zyndev! 我喜欢看 "a brief history of tomorrow"

这里面既有 `单引号` 也有 `双引号` 文本长了，也可能有 `三引号`
```python
In [22]: var1 = 'I'm zyndev! 我喜欢看 "a brief history of tomorrow"'
  File "<ipython-input-22-88da5ba2d984>", line 1
    var1 = 'I'm zyndev! 我喜欢看 "a brief history of tomorrow"'
              ^
SyntaxError: invalid syntax


In [23]: var1 = 'I\'m zyndev! 我喜欢看 "a brief history of tomorrow"'

In [24]: var1
Out[24]: 'I\'m zyndev! 我喜欢看 "a brief history of tomorrow"'

In [25]: print(var1)
I'm zyndev! 我喜欢看 "a brief history of tomorrow"
```

仔细看,中间加了一个 \ 通过使用 `\'` 替换了 `'`：
`var1 = 'I\'m zyndev! 我喜欢看 "a brief history of tomorrow"'`

通过转义字符可以解决`特殊字符`在文本中出现的特殊情况。同时可以解决错误的标识文本的结束

# 原始字符串

`转义字符`是把双刃剑，例如系统路径 `C:\Windows\temp`
```python
In [40]: location = 'C:\Windows\temp'

In [41]: location
Out[41]: 'C:\\Windows\temp'

In [42]: print(location)
C:\Windows      emp
```
这时发现 `location` 并不是 `C:\Windows\temp` 而是 `C:\Windows      emp`
| 转义字符  |描述     |
|:---      |:---     |
|\t         |横向制表符|
|`\\`       |反斜杠符号 |

因为 `\t` 是一个特殊字符，所以导致了这种情况,那如何输出想要的文本呢？

**解决方案一**
使用 `\\` 表示一个单独的 `\`
```python
In [44]: location = 'C:\Windows\\temp'

In [45]: print(location)
C:\Windows\temp
```

**解决方案二**
使用原始字符串
```python
In [48]: location = r'C:\Windows\temp'

In [49]: print(location)
C:\Windows\temp
```
注意路径前面的`r` 

所有的字符串都是直接按照字面的意思来使用，没有转义特殊或不能打印的字符。 原始字符串除在字符串的第一个引号前加上字母`r`（可以大小写）以外，与普通字符串有着几乎完全相同的语法。

# 运算

## 连接

**问题一：显示作者的姓名和籍贯，输出格式为：`姓名：xxx 籍贯：xxx`**

```python
In [26]: '姓名：' + my_name + ' 籍贯：' + address
Out[26]: '姓名：张瑀楠 籍贯：河北省廊坊市永清县'
```
通过 `+` 号，可以将多个字符串进行连接

如果要修改输出格式为:
```
姓名：xxx
籍贯：xxx
```
也就是 姓名 和 籍贯换行显示，这时我们可以使用`转义字符`完成这样的操作

| 转义字符  |描述     |
|:---      |:---     |
|\n         |换行     |

```python
In [27]: '姓名：' + my_name + '\n籍贯：' + address
Out[27]: '姓名：张瑀楠\n籍贯：河北省廊坊市永清县'

In [28]: var1 = '姓名：' + my_name + '\n籍贯：' + address

In [29]: print(var1)
姓名：张瑀楠
籍贯：河北省廊坊市永清县
```

通过使用 `\n` 我们完成了换行操作，还有很多的`转义字符`，通过这样的用法，可以完成一些操作，大家可以试一试

## 重复输出字符串

**问题二：在上学的时候经常遇到，老师怒气狠狠地说：'xxx同学，回家把课本抄3遍.'**

然后你用一手握三支笔的神技完成了不可能完成的任务，在python中可以使用 `字符串 * 数字` 来将一个字符串重复的效果

```python
In [30]: var1 = var1 * 3

In [31]: print(var1)
姓名：张瑀楠
籍贯：河北省廊坊市永清县姓名：张瑀楠
籍贯：河北省廊坊市永清县姓名：张瑀楠
籍贯：河北省廊坊市永清县

In [32]: var1 = '姓名：' + my_name + '\n籍贯：' + address + '\n'

In [33]: var1 = var1 * 3

In [34]: print(var1)
姓名：张瑀楠
籍贯：河北省廊坊市永清县
姓名：张瑀楠
籍贯：河北省廊坊市永清县
姓名：张瑀楠
籍贯：河北省廊坊市永清县
```

第一次输出格式有点乱，于是我改了一下在结尾加了一个 '\n'
第二次输出格式就稍微好了一点

## 通过索引获取字符串中字符

**问题三：找到姓名中的姓氏？**

假设所有人的姓氏都是名字的第一位，这时我们就需要取到第一个字符是什么？(计数是从`0`开始的)

```python
In [37]: my_name[0]
Out[37]: '张'
```

> []	通过索引获取字符串中字符


# 切片

**问题四：找到姓名中的名字？**

我们已经可以通过索引找到我的姓氏了，我的名字也很重要呀！

通过前面已经知道，我的名字是3个字，按照传统，第一个字是姓氏，后面的是名字，那我的名字应该是第2和第3个字了，有这规律应该不难知道名字了

**笨办法：通过索引找到**
```python
In [50]: name = my_name[1] + my_name[2]

In [51]: name
Out[51]: '瑀楠'
```
如果我名字是 `张瑀楠一世` 或者 `张瑀楠zyndev一世`,如果要取第2到第100个字，估计你就要崩溃了

取1-N个元素，也就是索引为1-(N-1)的元素，可以用循环：

```python
In [52]: my_name = '张瑀楠zyndev一世'

In [53]: name_len = len(my_name)

In [54]: name = ''

In [55]: for i in range(1, name_len):
    ...:     name = name + my_name[i]
    ...:

In [56]: name
Out[56]: '瑀楠zyndev一世'

```

虽然不用把所有的索引都写出来，但是这种操作也是很繁琐的，因此`Python`提供了切片（`Slice`）操作符，能大大简化这种操作。

**聪明的方法：使用切片得到名字**
对应上面的问题，我的名字还是`张瑀楠`，这时我们的还是需要 `第1` 和 `第2` 值  
```python
In [59]: my_name = '张瑀楠'

In [60]: my_name[1:3]
Out[60]: '瑀楠'
```
`my_name[1:3]`表示，从索引1开始取，直到索引3为止，但不包括索引3。即索引1，2，正好是2个字。

如果后面索引是长度，还可以省略：
```python
In [59]: my_name = '张瑀楠'

In [60]: my_name[1:]
Out[60]: '瑀楠'

In [62]: my_name = '张瑀楠zyndev一世'

In [63]: my_name[1:]
Out[63]: '瑀楠zyndev一世'
```
这样我们就不需要知道姓名有多长了

如果前面索引是0，也可以省略：
```python
In [64]: my_name = '张瑀楠zyndev一世'

In [65]: my_name[:3]
Out[65]: '张瑀楠'
```
这样就又找到我的真实姓名了

**问题五：`张瑀楠zyndev一世`是几世？**
```python
In [67]: my_name[9:]
Out[67]: '一世'
```

Good, 这样就完成了，的确是 `一世`，但是我们必须知道是从索引9 开始吗？这也太不方便了！ 其实我只想知道是倒数2个就可以了.

Python支持my_name[-1]取倒数第一个元素，那么它同样支持倒数切片，试试：

```python
In [68]: my_name[-2:]
Out[68]: '一世'
```
记住倒数第一个元素的索引是-1。

切片操作十分有用。我们可以轻松的截取某一段文本，但是有的科学家研究圣经按照某种间隔拿出一个字符可以得到一个神奇的语言，谁知道这是不是真的呢？

不过我们也会用隔几个数取一个数的想法，那我们先创建一个`0-100`的list,这样容易看出间隔.
```python
In [71]: numbers = list(range(100))

In [72]: numbers[:3]
Out[72]: [0, 1, 2]

In [73]: numbers[-3:]
Out[73]: [97, 98, 99]
```
我们试试取前三和后三

**问题六：找到所有的5个倍数**

```python
In [74]: numbers[5::5]
Out[74]: [5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 80, 85, 90, 95]
```
`numbers[5::5]`表示，从索引5开始间隔为5取，取到为止。

有了切片操作，很多地方循环就不再需要了。Python的切片非常灵活，一行代码就可以实现很多行循环才能完成的操作。

# in 成员运算符
如果字符串中包含给定的字符返回 True	
```python
In [35]: '张' in my_name
Out[35]: True

In [36]: '赵' in my_name
Out[36]: False
```

**问题七：老师给了一个很长表扬名单，我看了半天都没找到我，我到底在不在表扬名单呢？**
```python
In [75]: praise_list = '张瑀楠，...，xxx,很多人'

In [76]: my_name = '张瑀楠'

In [77]: my_name in praise_list
Out[77]: True
```

> 今天困了就到这里了